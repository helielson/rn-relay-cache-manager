{"version":3,"sources":["../../src/index.js"],"names":["CacheWriter","RelayCacheManager","constructor","options","cacheWriter","clear","clearStorage","getMutationWriter","getQueryWriter","getAllRecords","cache","records","readNode","id","callback","node","setImmediate","bind","readRootCall","callName","callValue"],"mappings":"AAEA,OAAOA,WAAP,MAAwB,eAAxB;;;AAGA,eAAe,MAAMC,iBAAN,CAAwB;AAErCC,cAAYC,OAAZ,EAAyC;AACvC,SAAKC,WAAL,GAAmB,IAAIJ,WAAJ,CAAgBG,OAAhB,CAAnB;AACD;;AAEDE,UAAQ;AACN,SAAKD,WAAL,CAAiBE,YAAjB;AACD;;AAEDC,sBAAiC;AAC/B,WAAO,KAAKH,WAAZ;AACD;;AAEDI,mBAA8B;AAC5B,WAAO,KAAKJ,WAAZ;AACD;;AAEDK,kBAAgB;AACd,WAAO,KAAKL,WAAL,CAAiBM,KAAjB,CAAuBC,OAA9B;AACD;;AAEDC,WACEC,EADF,EAEEC,QAFF,EAGE;AACA,UAAMC,OAAO,KAAKX,WAAL,CAAiBQ,QAAjB,CAA0BC,EAA1B,CAAb;AACAG,iBAAaF,SAASG,IAAT,CAAc,IAAd,EAAoB,IAApB,EAA0BF,IAA1B,CAAb;AACD;;AAEDG,eACEC,QADF,EAEEC,SAFF,EAGEN,QAHF,EAIE;AACA,SAAKV,WAAL,CAAiBc,YAAjB,CAA8BC,QAA9B,EAAwCC,SAAxC,EAAmDN,QAAnD;AACD;AApCoC","file":"index.js","sourcesContent":["// @flow\n\nimport CacheWriter from './CacheWriter';\nimport type { CacheWriterOptions } from './CacheWriter';\n\nexport default class RelayCacheManager {\n  cacheWriter: CacheWriter;\n  constructor(options: CacheWriterOptions) {\n    this.cacheWriter = new CacheWriter(options);\n  }\n\n  clear() {\n    this.cacheWriter.clearStorage();\n  }\n\n  getMutationWriter(): CacheWriter {\n    return this.cacheWriter;\n  }\n\n  getQueryWriter(): CacheWriter {\n    return this.cacheWriter;\n  }\n\n  getAllRecords() {\n    return this.cacheWriter.cache.records;\n  }\n\n  readNode(\n    id: string,\n    callback: (error: any, value: any) => void\n  ) {\n    const node = this.cacheWriter.readNode(id);\n    setImmediate(callback.bind(null, null, node));\n  }\n\n  readRootCall(\n    callName: string,\n    callValue: string,\n    callback: (error: any, value: any) => void\n  ) {\n    this.cacheWriter.readRootCall(callName, callValue, callback);\n  }\n}\n"]}